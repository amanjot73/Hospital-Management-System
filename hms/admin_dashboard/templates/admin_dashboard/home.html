{% extends 'admin_dashboard/base.html' %}

{% block title %}
Dashboard â€” HMS
{% endblock %}


{% block content %}

<h1 class="page-title">
Hospital Management Dashboard
</h1>

<div class="stats-grid">

    <div class="stat-card">
        <div class="stat-label">Patients</div>
        <div class="stat-number">{{ patients }}</div>
    </div>

    <div class="stat-card">
        <div class="stat-label">Doctors</div>
        <div class="stat-number">{{ doctors }}</div>
    </div>

    <div class="stat-card">
        <div class="stat-label">Staff</div>
        <div class="stat-number">{{ staff }}</div>
    </div>

    <div class="stat-card">
        <div class="stat-label">Departments</div>
        <div class="stat-number">{{ departments }}</div>
    </div>

    <div class="stat-card">
        <div class="stat-label">Inventory Items</div>
        <div class="stat-number">{{ inv }}</div>
    </div>

    <div class="stat-card">
        <div class="stat-label">Total Revenue</div>
        <div class="stat-number">
            ${{ total_billing|floatformat:0 }}
        </div>
    </div>

</div>



<!-- RECENT APPOINTMENTS -->
<div class="table-card">

<h2>Recent Appointments</h2>

{% if recent_appts %}

<table>

<thead>
<tr>

<th>Patient</th>
<th>Doctor</th>
<th>Date</th>
<th>Status</th>

</tr>
</thead>

<tbody>

{% for ap in recent_appts %}

<tr>

<td>{{ ap.patient }}</td>

<td>{{ ap.doctor }}</td>

<td>{{ ap.when|date:"M d, Y" }}</td>

<td>

{% if ap.status == 'done' %}
<span class="badge badge-completed">
Completed
</span>

{% elif ap.status == 'sch' %}
<span class="badge badge-scheduled">
Scheduled
</span>

{% else %}
<span class="badge badge-canceled">
Canceled
</span>

{% endif %}

</td>

</tr>

{% endfor %}

</tbody>

</table>

{% else %}

<p>No appointments found.</p>

{% endif %}

</div>
{% if top_medicines %}

<div class="table-card">

<h2>Top Medicines</h2>

<table>

<thead>
<tr>

<th>Name</th>
<th>Quantity</th>
<th>Price</th>

</tr>
</thead>

<tbody>

{% for medicine in top_medicines %}

<tr>

<td>{{ medicine.name }}</td>

<td>{{ medicine.qty }}</td>

<td>${{ medicine.unit_price }}</td>

</tr>

{% endfor %}

</tbody>

</table>

</div>

{% endif %}

{% endblock %}
